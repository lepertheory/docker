#!/usr/bin/env bash

set -o errexit
set -o pipefail
set -o nounset

SCRIPT_NAME="$(basename      "${BASH_SOURCE[0]}")"
SCRIPT_PATH="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
readonly SCRIPT_NAME
readonly SCRIPT_PATH

readonly PACKAGE="${1}"
readonly ARCHIVE="${2}"
readonly ARCHIVE_ROOT="${3:-${PACKAGE}}"

cd "${LFS}"/sources

echo "Unpacking ${ARCHIVE}"
tar -xf "${ARCHIVE}" 

cd "${ARCHIVE_ROOT}"
echo "Building ${PACKAGE}"
"${SCRIPT_PATH}/${PACKAGE}"
